<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>Tournament Draws</title>

   <script src="/lib/ex/d3.v3.min.js" charset="utf-8"></script>
   <script src="/cors/aip-cors.js" type="text/javascript" ></script>

   <script src="/lib/ex/jquery-1.10.2.min.js"></script>
   <script src="/lib/ex/typeahead.bundle.js"></script>
   <link href="/css/typeahead.css" rel="stylesheet">

   <script src="/lib/ex/bootstrap.min.js" charset="utf-8"></script>
   <link rel="stylesheet" href="/lib/ex/bootstrap.min.css">

   <script>
      if (location.origin.indexOf('localhost') < 0) {
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

         ga('create', 'UA-65756694-2', 'auto');
         ga('send', 'pageview');
      }
   </script>

   <style>
      .twitter-typeahead{ width:100%}

      path { stroke: #fff; fill-rule: evenodd; }
      #bloodhound { display: none; }
      .dropdown {
        border: 0 !important;  /*Removes border*/
        -webkit-appearance: none;  /*Removes default chrome and safari style*/
        -moz-appearance: none; /* Removes Default Firefox style*/
        width: 100%;
        font-size: 14px;
        line-height: 24px;
        padding: 5px 15px 5px 15px;
        box-shadow: inset 0 0 5px rgba(000,000,000, 0.5);
        -webkit-border-radius: 8px;
           -moz-border-radius: 8px;
                border-radius: 8px;
       }
   </style>

</head>
<body id="body">
   <div class="container-fluid">
   <div class="row" style="padding: 10px 0px">
      <div class="col-xs-12 col-sm-6 col-md-4">
         <div id="ddlb_te"> </div>
      </div>
      <div class="col-xs-12 col-sm-4">
         <div id="bloodhound">
            <input id="selected_player" class="form-control typeahead" type="text" placeholder="Player Name" onClick="this.setSelectionRange(0, this.value.length)">
         </div>
      </div>
   </div>
   <div class="row">
   <div class="col-xs-12" id="overview">
      <p>
      Use the Drop-down menu above to select a tournament or group of tournaments to view.
      </p>
      <h2> Tournament Draws </h2>
      <p>
      The "Sunburst" chart provides a compact and interactive view of a Tennis Draw. 
      </p>
      <p>
      Tournaments progress from the outer ring towards the center. Players and Match outcomes are displayed when hovering over or clicking on each segment of the sunburst. 
      All of the countries represented in a draw are visible in the center of the Sunburst. Selecting a flag displays the locations in the draw and final round played for each player from that country. Selecting the center of the Sunburst provides a "heatmap" view of match intensities based on the number of games played.
      </p>
      <p>
      Clicking anywhere on the chart "freezes" the display, disabling changes in highlighting; a second click "unfreezes."
      </p>
      <center>
         <img class="img-responsive" border="0" src="./tournamentsATP.jpg" alt="Tournament Bursts">
      </center>
      <p>
      Seeded players are positioned as follows: #1 top, #2 bottom, #3 left, #4 right; #5 right, #6 bottom, #7 top, #8 left.
      </p>
      <p>
      Seeded players range in color from light Blue to Purple. Qualifying players range from yellow to orange. Players who received a "Wild Card" appear in Red (not to be confused with the Heatmap view described above). All other players range from light to dark green.
      </p>
      <center>
         <img class="img-responsive" border="0" src="./tournamentBurst.jpg" alt="Tournament Bursts">
      </center>
      <p>
      When there is no seeding a full palette of colors is used to differentiate players.
      </p>
   </div>
   </div>
   <div id="draws"></div>
</div>
   <script src="burstChart.js" charset="utf-8"></script>
   <script src="tournaments.js" charset="utf-8"></script>
   <script>
      var okeys = Object.keys(aip.QueryString);
      if (okeys.indexOf('te') >= 0) {
         var id = aip.QueryString['te'];
         d3.select('#bloodhound').style('display', 'inline');
         te.loadTournament(id);
      } else {
         d3.select('#overview').style('display', 'inline');
      }
   </script>
   <script>
      country_codes = [];
      d3.json('./country_codes.json', function(err, data) {
         country_codes = data;
      });
      var te_dropDown = d3.select("#ddlb_te").append("select")
              .attr("name", "tournamentList")
              .attr("id", "te_tournamentList")
              .attr("class", "dropdown")

      d3.json('./tenniseurope.json', function(err, data) {
         var options = te_dropDown.selectAll("option")
              .data(data)
            .enter()
              .append("option");

         options.text(function (d) { return d.name; })
            .attr("value", function (d) { return d.value; });

         te_dropDown.on("change", function(d) { 
            var value = d3.event.target.value; 
            if (value) {
               d3.select('#bloodhound').style('display', 'inline');
               d3.select('#draws').style('display', 'inline');
               d3.select('#overview').style('display', 'none');
               te.loadTournament(value);
            } else {
               d3.select('#bloodhound').style('display', 'none');
               d3.select('#overview').style('display', 'inline');
               d3.select('#draws').style('display', 'none');
            }
         });
      });

   </script>
</body>
</html>
